---
tags:
created: 2025-08-06 19:54
updated: 2025-10-28 14:40
---
# PocketPantry 要件定義書

_ゲストファーストアプローチによる食材管理アプリ_

## 📱 アプリ概要

**PocketPantry**は、家族で共有できる食材管理アプリです。**ゲストファーストアプローチ**により、ユーザーはアプリのダウンロード直後から即座に食材管理を開始でき、必要に応じて段階的に高度な機能（家族共有・クラウド同期）を利用できます。

## 🎯 ターゲットユーザー

### プライマリーターゲット

- **食材管理に課題を感じている個人・家族**
- **スマホアプリに慣れ親しんだ20-50代**
- **新しいアプリへの登録に心理的ハードルを感じるユーザー**

### ペルソナ例

- **田中さん（30代主婦）**: 買い物忘れを防ぎたいが、新しいアプリの登録は面倒
- **佐藤さん（40代会社員）**: 家族と食材を共有したいが、まずは個人で試したい

## 📋 機能要件

### 🥇 Phase 1: ゲストモード（MVP）

#### 1.1 初回起動体験
- **即座に在庫一覧画面を表示**
- **登録・ログイン画面は表示しない**
- **空の状態では「まずは食材を登録しよう」ガイド表示**

#### 1.2 食材管理（ローカルストレージ）
- **手動食材登録** - カテゴリ別（冷蔵/冷凍/常温/野菜室）
- **在庫一覧表示** - カテゴリ別フィルタ、ステータス管理
- **ステータス管理** - 在庫あり/残りわずか/なし
- **賞味期限管理** - 当日通知（ローカル通知）
- **データ永続化** - AsyncStorageによるローカル保存

#### 1.3 買い物リスト
- **リスト作成・管理** - 複数リスト対応
- **アイテム追加** - 過去登録食材からの選択 + フリーワード入力
- **チェック機能** - 購入済みアイテムのチェックオフ
- **ローカル同期** - デバイス内でのリアルタイム更新

#### 1.4 基本通知
- **賞味期限アラート** - 当日のローカルプッシュ通知
- **通知設定** - ON/OFF切り替え可能

### 🥈 Phase 2:  ブラッシュアップ
アプリ公開に向けて機能の拡充と品質の向上。またマネタイズもここで考える。

#### 2.1 認証トリガー
- **「家族共有」ボタン押下時** - 初めてアカウント登録を促す
- **「データバックアップ」要求時** - クラウド保存のための認証
- **「複数デバイス利用」時** - 同期のための認証

#### 2.2 アカウント作成フロー
- **メールアドレス登録** - Supabase Auth連携
- **ファミリー作成 or 参加** - 招待コード機能
- **ゲストデータ移行** - ローカルデータを自動でクラウドにアップロード

#### 2.3 家族共有機能
- **リアルタイム同期** - Supabase Realtimeによる即座の反映
- **家族メンバー管理** - 招待・削除機能
- **権限管理** - 基本的には全メンバー同等権限

#### 2.4 クラウド機能
- **データバックアップ** - Supabaseへの自動保存
- **マルチデバイス同期** - スマホ・タブレット間での同期
- **データ復元** - 機種変更時のデータ復旧

#### 2.5 OCR・バーコード機能
- **レシートOCR登録** - Google Cloud Vision API（月10回制限）
	- レシートOCR登録はPhase4: 拡張フェーズに持っていくことも考える
- **バーコードスキャン** - JANコードAPIによる商品情報取得

#### 2.6 マネタイズ
- **プレミアム機能** - OCR無制限、高度な商品情報取得

### 🥉 Phase 4: 拡張フェーズ

#### 3.1 写真対応

- **食材写真撮影** - expo-image-picker使用
- **ローカルファイル保存** - FileSystemでの効率的管理
- **クラウド画像保存** - Supabase Storageへの自動アップロード

#### 3.2 AI・分析機能

- **AI献立提案** - GPT-4o APIによる在庫ベース提案
- **買い物パターン分析** - 購入履歴からの推奨機能
- **食材使用量予測** - 消費パターン学習

## 🛠️ 技術要件

### フロントエンド

- **React Native** 0.79.5 + **Expo** 53.0.20
- **TypeScript** - 型安全性確保
- **Expo Router** - ファイルベースルーティング

### ローカルストレージ

- **@react-native-async-storage/async-storage** - ゲストデータ管理
- **expo-notifications** - ローカルプッシュ通知

### クラウドバックエンド（Phase 2）

- **Supabase** - 認証・データベース・リアルタイム同期
- **Supabase Storage** - 画像ファイル保存（Phase 3）

### 外部API（Phase2）

- **Google Cloud Vision API** - OCR機能
- **JANコードAPI** - 商品情報取得

### 外部API（Phase 3）

- **OpenAI GPT-4o API** - AI献立提案

## 🔄 データフロー設計

### Phase 1: ローカルファースト

```
ユーザー入力 → AsyncStorage → 画面更新
通知スケジューリング → expo-notifications
```

### Phase 2: ハイブリッド同期

```
ローカルデータ → Supabase移行 → リアルタイム同期
AsyncStorage ⇄ Supabase Database
```

### Phase 3: クラウドファースト

```
Supabase中心 + ローカルキャッシュ
画像: FileSystem → Supabase Storage
```

## 📊 成功指標

### Phase 1（ゲストモード）

- **即離脱率**: 30%未満（従来型アプリは50-70%）
- **初回食材登録率**: 80%以上
- **7日間継続利用率**: 60%以上
- **アプリクラッシュ率**: 1%未満

### Phase 2（認証・家族共有）

- **ゲスト→会員転換率**: 40%以上
- **家族共有機能利用率**: 転換ユーザーの80%以上
- **データ移行成功率**: 99%以上

### Phase 3（高度機能）

- **写真機能利用率**: 60%以上
- **OCR機能利用率**: 30%以上
- **AI提案機能満足度**: 4.0/5.0以上

## 🚀 段階的リリース戦略

### βテスト（Phase 1）

- **ターゲット**: 20-30名のクローズドユーザー
- **期間**: 2週間
- **フィードバック収集**: アプリ内フィードバック機能

### 正式リリース（Phase 1完成版）

- **App Store/Google Play**: 一般公開
- **マーケティング**: 「登録不要ですぐ使える食材管理アプリ」

### 機能追加リリース（Phase 2, 3）

- **段階的機能追加**: 既存ユーザーへの自然な機能拡張
- **アップデート通知**: アプリ内での新機能案内

## ⚠️ リスク管理

### 技術リスク

- **ローカルデータ損失**: 定期的なクラウドバックアップ推奨
- **AsyncStorage容量制限**: Android 6MB制限への対応
- **デバイス間格差**: iOS/Androidの動作差異対応

### ビジネスリスク

- **ゲスト→会員転換率の低迷**: UX改善とタイミング最適化
- **競合アプリとの差別化**: ゲストモードの優位性強調
- **収益化タイミング**: プレミアム機能の適切な価格設定

### 対応策

- **週次データ監視**: 利用パターンとリテンション分析
- **A/Bテスト**: 会員登録促進タイミングの最適化
- **段階的機能拡張**: ユーザーニーズに合わせた優先順位調整

## 🎯 プロダクトビジョン

**「誰でも、今すぐ、簡単に始められる食材管理」**

PocketPantryは、食材管理というニーズに対して最も低い摩擦でアクセスできるソリューションを提供します。ユーザーは価値を実感してから、自らの意思で高度な機能を選択できる、真にユーザーファーストなプロダクトを目指します。
